// Copy the effected tables into new schema (ADEMPIEREBACKUP) from the backup dump

// Load production dump into default schema (ADEMPIERE)

// Insert data from backup (ADEMPIEREBACKUP) which isn't in production database (ADEMPIERE) into a seperate schema (ADEMPIERERESTORE)
INSERT INTO ADEMPIERERESTORE.C_ALLOCATIONHDR SELECT * FROM ADEMPIEREBACKUP.C_ALLOCATIONHDR adb WHERE adb.C_ALLOCATIONHDR_ID NOT IN (SELECT ad.C_ALLOCATIONHDR_ID FROM ADEMPIERE.C_ALLOCATIONHDR ad)

INSERT INTO ADEMPIERERESTORE.C_ALLOCATIONLINE SELECT * FROM ADEMPIEREBACKUP.C_ALLOCATIONLINE WHERE C_ALLOCATIONHDR_ID IN (SELECT C_ALLOCATIONHDR_ID FROM ADEMPIERERESTORE.C_ALLOCATIONHDR);

INSERT INTO ADEMPIERERESTORE.FACT_ACCT SELECT * FROM ADEMPIEREBACKUP.FACT_ACCT WHERE ADEMPIEREBACKUP.FACT_ACCT.AD_TABLE_ID = 735 AND ADEMPIEREBACKUP.FACT_ACCT.RECORD_ID IN (SELECT C_ALLOCATIONHDR_ID FROM ADEMPIERERESTORE.C_ALLOCATIONHDR);


// Insert "lost" data (ADEMPIERERESTORE) into production database (ADEMPIERE)
INSERT INTO ADEMPIERE.C_ALLOCATIONHDR SELECT * FROM ADEMPIERERESTORE.C_ALLOCATIONHDR;
INSERT INTO ADEMPIERE.C_ALLOCATIONLINE SELECT * FROM ADEMPIERERESTORE.C_ALLOCATIONLINE;
INSERT INTO ADEMPIERE.FACT_ACCT SELECT * FROM ADEMPIERERESTORE.FACT_ACCT;

// Then export the "fixed" production database (ADEMPIERE)